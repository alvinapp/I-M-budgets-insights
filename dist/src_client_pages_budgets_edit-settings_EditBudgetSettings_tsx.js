"use strict";
(self["webpackChunkbudgets_and_insights"] = self["webpackChunkbudgets_and_insights"] || []).push([["src_client_pages_budgets_edit-settings_EditBudgetSettings_tsx"],{

/***/ "./src/client/pages/budgets/edit-settings/EditBudgetSettings.tsx":
/*!***********************************************************************!*\
  !*** ./src/client/pages/budgets/edit-settings/EditBudgetSettings.tsx ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _components_NavBar__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../components/NavBar */ "./src/client/pages/components/NavBar.tsx");
/* harmony import */ var _components_NavBarTitle__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../components/NavBarTitle */ "./src/client/pages/components/NavBarTitle.tsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");
/* harmony import */ var react_icons_fi__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! react-icons/fi */ "./node_modules/react-icons/fi/index.esm.js");
/* harmony import */ var _components_budget_BudgetDisplay__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../components/budget/BudgetDisplay */ "./src/client/pages/components/budget/BudgetDisplay.tsx");
/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-query */ "./node_modules/react-query/es/index.js");
/* harmony import */ var client_api_categories__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! client/api/categories */ "./src/client/api/categories.ts");
/* harmony import */ var client_store_configuration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! client/store/configuration */ "./src/client/store/configuration.ts");
/* harmony import */ var client_store_categoriesStore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! client/store/categoriesStore */ "./src/client/store/categoriesStore.ts");
/* harmony import */ var _components_budget_BudgetSettingCard__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../components/budget/BudgetSettingCard */ "./src/client/pages/components/budget/BudgetSettingCard.tsx");
/* harmony import */ var _components_budget_GeneralInfoCard__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../components/budget/GeneralInfoCard */ "./src/client/pages/components/budget/GeneralInfoCard.tsx");
/* harmony import */ var client_store_currencySettingsStore__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! client/store/currencySettingsStore */ "./src/client/store/currencySettingsStore.ts");
/* harmony import */ var client_api_budget__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! client/api/budget */ "./src/client/api/budget.ts");
/* harmony import */ var client_api_token__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! client/api/token */ "./src/client/api/token.ts");
/* harmony import */ var client_utils_Toast__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! client/utils/Toast */ "./src/client/utils/Toast.ts");
/* harmony import */ var client_store_userStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! client/store/userStore */ "./src/client/store/userStore.ts");
/* harmony import */ var client_pages_components_BackButton__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! client/pages/components/BackButton */ "./src/client/pages/components/BackButton.tsx");
/* harmony import */ var client_store_budgetSettingsStore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! client/store/budgetSettingsStore */ "./src/client/store/budgetSettingsStore.ts");
/* harmony import */ var client_store_bottomSheetStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! client/store/bottomSheetStore */ "./src/client/store/bottomSheetStore.ts");
/* harmony import */ var react_spring_bottom_sheet__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! react-spring-bottom-sheet */ "./node_modules/react-spring-bottom-sheet/dist/index.es.js");
/* harmony import */ var _SavingsGoalConfirmation__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../SavingsGoalConfirmation */ "./src/client/pages/budgets/SavingsGoalConfirmation.tsx");
/* harmony import */ var client_pages_components_budget_SuccessfullCreatedView__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! client/pages/components/budget/SuccessfullCreatedView */ "./src/client/pages/components/budget/SuccessfullCreatedView.tsx");
/* harmony import */ var client_assets_images_success_icon_svg__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! client/assets/images/success-icon.svg */ "./src/client/assets/images/success-icon.svg");
/* harmony import */ var client_utils_MockData__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! client/utils/MockData */ "./src/client/utils/MockData.tsx");
/* harmony import */ var client_pages_components_DebtViewCard__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! client/pages/components/DebtViewCard */ "./src/client/pages/components/DebtViewCard.tsx");
/* harmony import */ var client_utils_Formatters__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! client/utils/Formatters */ "./src/client/utils/Formatters.ts");




























const EditBudgetSettings = () => {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1;
    const [savingsSuccess, setSavingsSuccess] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const savingsBottomSheetStore = (0,client_store_bottomSheetStore__WEBPACK_IMPORTED_MODULE_3__.useSavingsBottomSheetStore)((state) => state);
    const configurations = (0,client_store_configuration__WEBPACK_IMPORTED_MODULE_4__.useConfigurationStore)((state) => state.configuration);
    const categoriesStore = (0,client_store_categoriesStore__WEBPACK_IMPORTED_MODULE_5__["default"])((state) => state);
    const setToken = (0,client_store_configuration__WEBPACK_IMPORTED_MODULE_4__.useConfigurationStore)((state) => state.setToken);
    const userStore = (0,client_store_userStore__WEBPACK_IMPORTED_MODULE_6__["default"])((state) => state);
    const budgetSettingsStore = (0,client_store_budgetSettingsStore__WEBPACK_IMPORTED_MODULE_7__.useBudgetSettingsStore)();
    const setUser = userStore.setUser;
    const { data } = (0,react_query__WEBPACK_IMPORTED_MODULE_2__.useQuery)(["token"], () => (0,client_api_token__WEBPACK_IMPORTED_MODULE_8__["default"])(configurations).then((res) => {
        if (typeof res.user !== "undefined") {
            setUser(res.user);
            setToken(res.token);
        }
        else {
            navigate("/");
            (0,client_utils_Toast__WEBPACK_IMPORTED_MODULE_9__.showCustomToast)({ message: "The sdk key is invalid" });
        }
    }), { refetchOnWindowFocus: false });
    const mapCategoryToData = (category, index) => [
        `data${index}`,
        {
            amount: (category === null || category === void 0 ? void 0 : category.amount) || 0,
            contribution_amount: 0,
            percentage: 0,
            category_id: category === null || category === void 0 ? void 0 : category.category.id,
            name: category === null || category === void 0 ? void 0 : category.name,
            pseudo_name: (category === null || category === void 0 ? void 0 : category.name) + " " + (category === null || category === void 0 ? void 0 : category.category.emoji),
            extern_id: category === null || category === void 0 ? void 0 : category.category.id,
            order: 0,
            contribution_at: "",
            is_contribute_customized: true,
        },
    ];
    const { isFetching: fetchingCategories } = (0,react_query__WEBPACK_IMPORTED_MODULE_2__.useQuery)("fetch-categories", () => (0,client_api_categories__WEBPACK_IMPORTED_MODULE_10__.getCategories)({ configuration: configurations }).then((result) => {
        categoriesStore.setCategories(result);
        const mapper = (type) => (category, index) => {
            var _a;
            ((_a = category.macro_type) === null || _a === void 0 ? void 0 : _a.name) === type
                ? mapCategoryToData(category, index)
                : null;
        };
        const essentialsData = result.map(mapper("Essentials")).filter(Boolean);
        const wantsData = result.map(mapper("Wants")).filter(Boolean);
        setEssentialsMapState(new Map(essentialsData));
        setWantsMapState(new Map(wantsData));
    }), { refetchOnWindowFocus: false });
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {
        const initializeMapState = (index, setStateFn) => {
            if (categoriesStore.categoryBudgets &&
                categoriesStore.categoryBudgets.length > index) {
                const initialData = categoriesStore.categoryBudgets[index].data.map(mapCategoryToData);
                setStateFn(new Map(initialData));
            }
        };
        initializeMapState(0, setEssentialsMapState);
        initializeMapState(1, setWantsMapState);
    }, [categoriesStore.categoryBudgets]);
    const { isFetching: fetchingMacros } = (0,react_query__WEBPACK_IMPORTED_MODULE_2__.useQuery)("fetch-macros", () => (0,client_api_budget__WEBPACK_IMPORTED_MODULE_11__.fetchMacros)({ configuration: configurations }).then((res) => {
        categoriesStore.setMacros(res);
    }), { refetchOnWindowFocus: false, enabled: !!configurations.token });
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_12__.useNavigate)();
    const currencySymbol = (0,client_store_currencySettingsStore__WEBPACK_IMPORTED_MODULE_13__["default"])((state) => state.currencySymbol);
    const [essentialsMapState, setEssentialsMapState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Map());
    const [wantsMapState, setWantsMapState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Map());
    const updateEssentialsMap = (i, data) => {
        setEssentialsMapState((map) => new Map(map.set(`data${i}`, data)));
    };
    const updateWantsMap = (i, data) => {
        setWantsMapState((map) => new Map(map.set(`data${i}`, data)));
    };
    //essentials
    const essentialsList = Array.from(essentialsMapState, ([key, value]) => {
        return { [key]: value };
    }).map((element, i) => {
        return element[`data${i}`];
    });
    //wants
    const wantsList = Array.from(wantsMapState, ([key, value]) => {
        return { [key]: value };
    }).map((element, i) => {
        return element[`data${i}`];
    });
    const navigator = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_12__.useNavigate)();
    const macroData = (_b = (_a = categoriesStore.macros) === null || _a === void 0 ? void 0 : _a.data) !== null && _b !== void 0 ? _b : [];
    const essentialMacro = macroData[0];
    const wantslMacro = macroData[1];
    const savingsMacro = macroData[2];
    const essentialGoals = (_c = essentialMacro === null || essentialMacro === void 0 ? void 0 : essentialMacro.goals) !== null && _c !== void 0 ? _c : [];
    const wantsGoals = (_d = wantslMacro === null || wantslMacro === void 0 ? void 0 : wantslMacro.goals) !== null && _d !== void 0 ? _d : [];
    const savingsGoals = (_e = savingsMacro === null || savingsMacro === void 0 ? void 0 : savingsMacro.goals) !== null && _e !== void 0 ? _e : [];
    const essentialBudgetAmount = (_g = (_f = essentialGoals[0]) === null || _f === void 0 ? void 0 : _f.amount) !== null && _g !== void 0 ? _g : "";
    const [allocatedEssentials, setAllocatedEssentials] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(typeof categoriesStore.categoryBudgets[0] !== undefined
        ? categoriesStore === null || categoriesStore === void 0 ? void 0 : categoriesStore.categoryBudgets[0].total_amount
        : 0);
    const wantsBudgetAmount = (_j = (_h = wantsGoals[0]) === null || _h === void 0 ? void 0 : _h.amount) !== null && _j !== void 0 ? _j : "";
    const [allocatedWants, setAllocatedWants] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(typeof categoriesStore.categoryBudgets[1] !== undefined
        ? (_k = categoriesStore === null || categoriesStore === void 0 ? void 0 : categoriesStore.categoryBudgets[1]) === null || _k === void 0 ? void 0 : _k.total_amount
        : 0);
    const savingsBudgetAmount = (_m = (_l = savingsGoals[0]) === null || _l === void 0 ? void 0 : _l.amount) !== null && _m !== void 0 ? _m : "";
    const [allocatedSavings, setAllocatedSavings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(typeof categoriesStore.categoryBudgets[2] !== undefined
        ? categoriesStore === null || categoriesStore === void 0 ? void 0 : categoriesStore.categoryBudgets[2].total_amount
        : 0);
    const [addSavings, setAddSavings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const [savingsList, setSavingsList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([{}]);
    const budgetStore = (0,client_store_budgetSettingsStore__WEBPACK_IMPORTED_MODULE_7__.useBudgetSettingsStore)((state) => state);
    const { isFetching: savingBudgetDetails, refetch: saveBudgetInfo } = (0,react_query__WEBPACK_IMPORTED_MODULE_2__.useQuery)("save-budget", () => {
        const macrotypeEntries = [];
        if (essentialsList.some((item) => Object.keys(item).length > 0)) {
            macrotypeEntries.push({
                macrotype_name: "Essentials",
                data: essentialsList,
            });
        }
        if (wantsList.some((item) => Object.keys(item).length > 0)) {
            macrotypeEntries.push({
                macrotype_name: "Wants",
                data: wantsList,
            });
        }
        if (savingsList.some((item) => Object.keys(item).length > 0)) {
            macrotypeEntries.push({
                macrotype_name: "Savings",
                data: savingsList,
            });
        }
        return (0,client_api_budget__WEBPACK_IMPORTED_MODULE_11__.saveBudget)({
            configuration: configurations,
            data: {
                macrotype_entries: macrotypeEntries,
            },
        });
    }, { refetchOnWindowFocus: false, enabled: false });
    const [selectedSavingsGoal, setSelectedSavingsGoal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({
        name: "",
    });
    const totalDebt = client_utils_MockData__WEBPACK_IMPORTED_MODULE_14__.allTimeDebt.reduce((accumulator, item) => {
        return (accumulator += item.amount);
    }, 0);
    const user = (0,client_store_userStore__WEBPACK_IMPORTED_MODULE_6__["default"])((state) => state);
    const linkedAccounts = user.user.external_linked_accounts.find((element) => (element === null || element === void 0 ? void 0 : element.name) === "M-Pesa");
    const finalLinkedAccounts = [linkedAccounts];
    const numberOfLinkedAccounts = (_o = finalLinkedAccounts.length) !== null && _o !== void 0 ? _o : 0;
    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "h-screen w-screen" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_NavBar__WEBPACK_IMPORTED_MODULE_15__["default"], { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "flex flex-row items-center justify-between border border-b-1 pt-4 pb-2 pr-3.5" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(client_pages_components_BackButton__WEBPACK_IMPORTED_MODULE_16__["default"], { onClick: () => {
                                // call save-budget here
                                saveBudgetInfo();
                                navigate("/budgets-view");
                            } }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_NavBarTitle__WEBPACK_IMPORTED_MODULE_17__["default"], { title: "" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "h-6 w-6 rounded-full flex items-center justify-center", onClick: () => navigate("/view-info") })] })) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "flex flex-col mx-3.5" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "mb-3 mt-5" }, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_budget_GeneralInfoCard__WEBPACK_IMPORTED_MODULE_18__.GeneralInfoCard, { iconBg: "bg-skin-iconPrimary", icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_icons_fi__WEBPACK_IMPORTED_MODULE_19__.FiCloud, {}), title: "Linked accounts", subtitle: "Track your spending easily across linked accounts and stay on top of your budget with insights.", caption: `${typeof numberOfLinkedAccounts === "undefined"
                                ? ""
                                : (0,client_utils_Formatters__WEBPACK_IMPORTED_MODULE_20__.checkNAN)(numberOfLinkedAccounts)}`, onClick: () => {
                                navigate("/linked-accounts");
                            } }) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "mb-3" }, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_budget_GeneralInfoCard__WEBPACK_IMPORTED_MODULE_18__.GeneralInfoCard, { iconBg: "bg-skin-successWithOpacity", icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_icons_fi__WEBPACK_IMPORTED_MODULE_19__.FiBriefcase, {}), title: "Monthly net income", subtitle: "This is used as the basis for calculating your overall budget split.", caption: `${budgetSettingsStore.monthlyIncome !== 0
                                ? budgetSettingsStore.monthlyIncome.toString()
                                : (_r = (_q = (_p = userStore.user) === null || _p === void 0 ? void 0 : _p.income) === null || _q === void 0 ? void 0 : _q.toString()) !== null && _r !== void 0 ? _r : ""}`, currencySymbol: currencySymbol, onClick: () => navigate("/edit-monthly-income") }) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_budget_GeneralInfoCard__WEBPACK_IMPORTED_MODULE_18__.GeneralInfoCard, { iconBg: "bg-skin-secondary3WithOpacity", icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_icons_fi__WEBPACK_IMPORTED_MODULE_19__.FiPieChart, {}), title: "Budget split", subtitle: "We recommend reserving 70% of your income after your monthly debt repayment commitments to Essentials then 30% for Wants. Tap here to edit.", caption: `${(_t = (_s = categoriesStore.macros) === null || _s === void 0 ? void 0 : _s.budget_split) !== null && _t !== void 0 ? _t : ""}`, onClick: () => {
                            var _a, _b;
                            if ((_a = categoriesStore.macros) === null || _a === void 0 ? void 0 : _a.budget_split) {
                                navigate("/edit-split-income");
                                budgetStore.setMonthlyIncome((_b = userStore.user) === null || _b === void 0 ? void 0 : _b.income);
                            }
                        } }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "mb-4 mt-5 flex flex-row items-center justify-center px-3.5" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "flex-grow h-px bg-skin-accent3" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "flex flex-col" }, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_icons_fi__WEBPACK_IMPORTED_MODULE_19__.FiPieChart, { size: "1.5rem", color: "#555466" }) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "flex-grow h-px bg-skin-accent3" })] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "shadow-card px-4 pt-5 pb-3 mt-4.5 rounded-lg mb-4" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_budget_BudgetDisplay__WEBPACK_IMPORTED_MODULE_21__.BudgetDisplay, { title: "Debt repayment", budgetAmount: savingsBudgetAmount, percentageOfBudgetCaption: `${(_v = (_u = savingsGoals[0]) === null || _u === void 0 ? void 0 : _u.share) !== null && _v !== void 0 ? _v : ""}% of overall budget`, unallocatedCaption: "Unallocated", allocatedCaption: "Allocated", unallocatedAmount: 0, allocatedAmount: totalDebt, progressPercentage: 100, indicatorColor: "bg-[#036AB3]", progressColor: "#036AB3" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "border mt-4 mb-4.5" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "flex flex-col" }, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "flex flex-row justify-between items-center mb-4" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "text-sm tracking-wide font-medium text-skin-subtitle font-primary" }, { children: "Categories" })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "text-sm tracking-wide font-medium text-skin-subtitle font-primary" }, { children: "Budget allocation" }))] })), client_utils_MockData__WEBPACK_IMPORTED_MODULE_14__.allTimeDebt === null || client_utils_MockData__WEBPACK_IMPORTED_MODULE_14__.allTimeDebt === void 0 ? void 0 : client_utils_MockData__WEBPACK_IMPORTED_MODULE_14__.allTimeDebt.map((debt, index) => {
                                            return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(client_pages_components_DebtViewCard__WEBPACK_IMPORTED_MODULE_22__["default"], { amount: (0,client_utils_Formatters__WEBPACK_IMPORTED_MODULE_20__.checkNAN)(Math.round(debt === null || debt === void 0 ? void 0 : debt.loanDetails.monthlyPayment)), icon: debt === null || debt === void 0 ? void 0 : debt.icon, goal: debt === null || debt === void 0 ? void 0 : debt.name }, index));
                                        })] }) }))] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "shadow-card px-4 pt-5 pb-3 rounded-lg" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_budget_BudgetDisplay__WEBPACK_IMPORTED_MODULE_21__.BudgetDisplay, { title: "Essentials", budgetAmount: essentialBudgetAmount !== null && essentialBudgetAmount !== void 0 ? essentialBudgetAmount : 0, percentageOfBudgetCaption: `${(_x = (_w = essentialGoals[0]) === null || _w === void 0 ? void 0 : _w.share) !== null && _x !== void 0 ? _x : ""}% of overall budget`, unallocatedCaption: "Unallocated", allocatedCaption: "Allocated", unallocatedAmount: typeof parseInt(essentialBudgetAmount) === "number" &&
                                    essentialBudgetAmount > 0
                                    ? Math.max(essentialBudgetAmount - allocatedEssentials, 0)
                                    : 0 // Ensure perc
                                , allocatedAmount: allocatedEssentials, progressPercentage: typeof parseInt(essentialBudgetAmount) === "number" &&
                                    essentialBudgetAmount > 0
                                    ? Math.min((allocatedEssentials / essentialBudgetAmount) * 100, 100) // Ensure percentage stays between 0 and 100
                                    : 0, progressColor: "#009FDC", indicatorColor: "bg-[#009FDC]" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "flex flex-row items-center justify-center mt-6 mb-4" }, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "text-skin-base font-primary text-xs tracking-wide" }, { children: "Add budgets to your Essentials below" })) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "border mt-4 mb-4.5" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "flex flex-row justify-between items-center mb-4" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "text-xs tracking-wide font-medium text-skin-subtitle font-primary" }, { children: "Categories" })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "text-xs tracking-wide font-medium text-skin-subtitle font-primary" }, { children: "Budget allocation" }))] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "flex flex-col" }, { children: categoriesStore.categoryBudgets[0] &&
                                    ((_y = categoriesStore.categoryBudgets[0].data) === null || _y === void 0 ? void 0 : _y.length) > 0
                                    ? categoriesStore.categoryBudgets[0].data.map((category, i) => {
                                        const data = essentialsMapState.get(`data${i}`);
                                        const initialAmount = (category === null || category === void 0 ? void 0 : category.amount) || 0;
                                        const adjustment = (data === null || data === void 0 ? void 0 : data.amount) || 0;
                                        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_budget_BudgetSettingCard__WEBPACK_IMPORTED_MODULE_23__.BudgetSettingCard, { category: category === null || category === void 0 ? void 0 : category.name, emoji: category === null || category === void 0 ? void 0 : category.category.emoji, amount: data === null || data === void 0 ? void 0 : data.amount, maxValue: Number.MAX_SAFE_INTEGER, unallocatedAmount: typeof parseInt(essentialBudgetAmount) === "number" &&
                                                essentialBudgetAmount > 0
                                                ? Math.max(essentialBudgetAmount - allocatedEssentials, 0)
                                                : 0, addValue: (e) => {
                                                updateEssentialsMap(i, Object.assign(Object.assign({}, data), { amount: e }));
                                                setAllocatedEssentials(allocatedEssentials + e);
                                            }, updateValue: (newValue) => {
                                                const oldValue = (data === null || data === void 0 ? void 0 : data.amount) || 0;
                                                const valueDifference = newValue - oldValue;
                                                const newAllocatedEssentials = Math.max(0, allocatedEssentials + valueDifference);
                                                if (newAllocatedEssentials <= essentialBudgetAmount) {
                                                    setAllocatedEssentials(newAllocatedEssentials);
                                                    updateEssentialsMap(i, Object.assign(Object.assign({}, data), { amount: newValue }));
                                                }
                                                else {
                                                    (0,client_utils_Toast__WEBPACK_IMPORTED_MODULE_9__.showCustomToast)({
                                                        message: "Budget limit exceeded",
                                                    });
                                                }
                                            }, increment: () => {
                                                const newAmount = ((data === null || data === void 0 ? void 0 : data.amount) || 0) +
                                                    categoriesStore.incrementalAmount;
                                                const totalAllocated = allocatedEssentials +
                                                    categoriesStore.incrementalAmount;
                                                if (totalAllocated <= essentialBudgetAmount) {
                                                    setAllocatedEssentials(totalAllocated);
                                                    updateEssentialsMap(i, Object.assign(Object.assign({}, data), { amount: newAmount }));
                                                }
                                                else {
                                                    // If the new total allocated budget exceeds the limit
                                                    (0,client_utils_Toast__WEBPACK_IMPORTED_MODULE_9__.showCustomToast)({
                                                        message: "Budget limit exceeded",
                                                    });
                                                }
                                            }, decrement: () => {
                                                updateEssentialsMap(i, Object.assign(Object.assign({}, data), { amount: Math.max(adjustment - categoriesStore.incrementalAmount, 0) }));
                                                setAllocatedEssentials(allocatedEssentials -
                                                    categoriesStore.incrementalAmount);
                                            } }, i));
                                    })
                                    : null }))] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "shadow-card px-4 pt-5 pb-3 mt-4.5 rounded-lg" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_budget_BudgetDisplay__WEBPACK_IMPORTED_MODULE_21__.BudgetDisplay, { title: "Wants", budgetAmount: wantsBudgetAmount !== null && wantsBudgetAmount !== void 0 ? wantsBudgetAmount : 0, percentageOfBudgetCaption: `${(_0 = (_z = wantsGoals[0]) === null || _z === void 0 ? void 0 : _z.share) !== null && _0 !== void 0 ? _0 : ""}% of overall budget`, unallocatedCaption: "Unallocated", allocatedCaption: "Allocated", unallocatedAmount: typeof wantsBudgetAmount === "number" || wantsBudgetAmount > 0
                                    ? Math.max(wantsBudgetAmount - allocatedWants, 0) // Ensure percentage stays between 0 and 100
                                    : 0, allocatedAmount: allocatedWants !== null && allocatedWants !== void 0 ? allocatedWants : 0, progressPercentage: typeof wantsBudgetAmount === "number" && wantsBudgetAmount > 0
                                    ? Math.min((allocatedWants / wantsBudgetAmount) * 100, 100) // Ensure percentage stays between 0 and 100
                                    : 0, progressColor: "#354AA6", indicatorColor: "bg-[#354AA6]" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "flex flex-row items-center justify-center mt-6 mb-4" }, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "text-skin-base font-primary text-xs tracking-wide" }, { children: "Add budgets to your Wants below" })) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "border mt-4 mb-4.5" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "flex flex-row justify-between items-center mb-4" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "text-xs tracking-wide font-medium text-skin-subtitle font-primary" }, { children: "Categories" })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "text-xs tracking-wide font-medium text-skin-subtitle font-primary" }, { children: "Budget allocation" }))] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "flex flex-col" }, { children: categoriesStore.categoryBudgets[1] &&
                                    ((_1 = categoriesStore.categoryBudgets[1].data) === null || _1 === void 0 ? void 0 : _1.length) > 0
                                    ? categoriesStore.categoryBudgets[1].data.map((category, i) => {
                                        const data = wantsMapState.get(`data${i}`);
                                        const initialAmount = (category === null || category === void 0 ? void 0 : category.amount) || 0;
                                        const adjustment = (data === null || data === void 0 ? void 0 : data.amount) || 0;
                                        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_budget_BudgetSettingCard__WEBPACK_IMPORTED_MODULE_23__.BudgetSettingCard, { category: category === null || category === void 0 ? void 0 : category.name, emoji: category === null || category === void 0 ? void 0 : category.category.emoji, amount: data === null || data === void 0 ? void 0 : data.amount, maxValue: Number.MAX_SAFE_INTEGER, unallocatedAmount: typeof wantsBudgetAmount === "number" ||
                                                wantsBudgetAmount > 0
                                                ? Math.max(wantsBudgetAmount - allocatedWants, 0) // Ensure percentage stays between 0 and 100
                                                : 0, addValue: (e) => {
                                                updateWantsMap(i, Object.assign(Object.assign({}, data), { amount: e }));
                                                setAllocatedWants(allocatedWants + e);
                                            }, updateValue: (newValue) => {
                                                const oldValue = (data === null || data === void 0 ? void 0 : data.amount) || 0;
                                                const valueDifference = newValue - oldValue;
                                                const newAllocatedWnats = Math.max(0, allocatedWants + valueDifference);
                                                if (newAllocatedWnats <= essentialBudgetAmount) {
                                                    setAllocatedWants(newAllocatedWnats);
                                                    updateWantsMap(i, Object.assign(Object.assign({}, data), { amount: newValue }));
                                                }
                                                else {
                                                    (0,client_utils_Toast__WEBPACK_IMPORTED_MODULE_9__.showCustomToast)({
                                                        message: "Budget limit exceeded",
                                                    });
                                                }
                                            }, increment: () => {
                                                const newAmount = ((data === null || data === void 0 ? void 0 : data.amount) || 0) +
                                                    categoriesStore.incrementalAmount;
                                                const totalAllocated = allocatedWants + categoriesStore.incrementalAmount;
                                                if (totalAllocated <= wantsBudgetAmount) {
                                                    setAllocatedWants(totalAllocated);
                                                    updateWantsMap(i, Object.assign(Object.assign({}, data), { amount: newAmount }));
                                                }
                                                else {
                                                    (0,client_utils_Toast__WEBPACK_IMPORTED_MODULE_9__.showCustomToast)({
                                                        message: "Budget limit exceeded",
                                                    });
                                                }
                                            }, decrement: () => {
                                                updateWantsMap(i, Object.assign(Object.assign({}, data), { amount: Math.max(adjustment - categoriesStore.incrementalAmount, 0) }));
                                                setAllocatedWants(allocatedWants - categoriesStore.incrementalAmount);
                                            } }, i));
                                    })
                                    : null }))] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_spring_bottom_sheet__WEBPACK_IMPORTED_MODULE_24__.BottomSheet, { onDismiss: () => {
                            savingsBottomSheetStore.setSavingsBottomSheet(false);
                        }, open: savingsBottomSheetStore.savingsBottomSheet, style: {
                            borderRadius: 24,
                        }, children: savingsSuccess ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(client_pages_components_budget_SuccessfullCreatedView__WEBPACK_IMPORTED_MODULE_25__["default"], { image: client_assets_images_success_icon_svg__WEBPACK_IMPORTED_MODULE_26__, title: "Whoop! Goal created", caption: "Duis aute categorize in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur Excepteur sint occaecat cupidatat non proident.", onClick: () => {
                                setSavingsSuccess(false);
                                savingsBottomSheetStore.setSavingsBottomSheet(false);
                            } })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_SavingsGoalConfirmation__WEBPACK_IMPORTED_MODULE_27__["default"], { monthlyContribution: savingsBudgetAmount, targetAmount: essentialBudgetAmount * 3, progressPercentage: typeof savingsBudgetAmount === "number" &&
                                savingsBudgetAmount > 0
                                ? Math.min((allocatedSavings / savingsBudgetAmount) * 100, 100) // Ensure percentage stays between 0 and 100
                                : 0, emoji: "\uD83C\uDFAF", goal: selectedSavingsGoal.name, onClick: () => {
                                saveBudgetInfo().then((results) => {
                                    if (results.isSuccess) {
                                        setSavingsSuccess(true);
                                    }
                                });
                            } })), defaultSnap: 400 })] }))] })));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EditBudgetSettings);


/***/ }),

/***/ "./src/client/store/budgetSettingsStore.ts":
/*!*************************************************!*\
  !*** ./src/client/store/budgetSettingsStore.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useBudgetSettingsStore: () => (/* binding */ useBudgetSettingsStore)
/* harmony export */ });
/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zustand */ "./node_modules/zustand/esm/index.mjs");

const useBudgetSettingsStore = (0,zustand__WEBPACK_IMPORTED_MODULE_0__.create)((set) => ({
    currency: " KES",
    monthlyIncome: 0,
    incomeSplit: {
        essentials: 50,
        wants: 30,
        savings: 20,
    },
    setMonthlyIncome: (amount) => {
        return set((state) => {
            const result = Object.assign(Object.assign({}, state), { monthlyIncome: amount });
            return result;
        });
    },
    getMonthlyIncome: () => {
        return set((state) => {
            const result = Object.assign(Object.assign({}, state), { monthlyIncome: state.monthlyIncome });
            return result;
        });
    },
    setIncomeSplit: (split) => {
        return set((state) => {
            const result = Object.assign(Object.assign({}, state), { incomeSplit: split });
            return result;
        });
    },
    getIncomeSplit: () => {
        return set((state) => {
            const result = Object.assign(Object.assign({}, state), { incomeSplit: state.incomeSplit });
            return result;
        });
    },
}));



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjX2NsaWVudF9wYWdlc19idWRnZXRzX2VkaXQtc2V0dGluZ3NfRWRpdEJ1ZGdldFNldHRpbmdzX3RzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRDO0FBQ0M7QUFDVTtBQUNSO0FBQ21CO0FBQ0k7QUFDL0I7QUFDZTtBQUNzQjtBQUNkO0FBQ2dCO0FBQ0o7QUFDQTtBQUNkO0FBQ3BCO0FBQ2E7QUFDSDtBQUNVO0FBQ2M7QUFDQztBQUNuQjtBQUNTO0FBQzBCO0FBQzNCO0FBQ1o7QUFDWTtBQUNiO0FBRW5ELE1BQU0sa0JBQWtCLEdBQUcsR0FBRyxFQUFFOztJQUM5QixNQUFNLENBQUMsY0FBYyxFQUFFLGlCQUFpQixDQUFDLEdBQUcsK0NBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1RCxNQUFNLHVCQUF1QixHQUFHLHlGQUEwQixDQUN4RCxDQUFDLEtBQVUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUN0QixDQUFDO0lBQ0YsTUFBTSxjQUFjLEdBQUcsaUZBQXFCLENBQzFDLENBQUMsS0FBVSxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUN6QixDQUFDO0lBQ2IsTUFBTSxlQUFlLEdBQUcsd0VBQWtCLENBQUMsQ0FBQyxLQUFVLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2xFLE1BQU0sUUFBUSxHQUFHLGlGQUFxQixDQUFDLENBQUMsS0FBVSxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDdkUsTUFBTSxTQUFTLEdBQUcsa0VBQVksQ0FBQyxDQUFDLEtBQVUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdEQsTUFBTSxtQkFBbUIsR0FBRyx3RkFBc0IsRUFBRSxDQUFDO0lBQ3JELE1BQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQyxPQUFPLENBQUM7SUFDbEMsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLHFEQUFRLENBQ3ZC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QUNQLEtBQUssS0FDUixXQUFXLEVBQUUsS0FBSyxHQUNuQixDQUFDO1lBQ0YsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0QsY0FBYyxFQUFFLEdBQUcsRUFBRTtRQUNuQixPQUFPLEdBQUcsQ0FBQyxDQUFDLEtBQXFCLEVBQUUsRUFBRTtZQUNuQyxNQUFNLE1BQU0sbUNBQ1AsS0FBSyxLQUNSLFdBQVcsRUFBRSxLQUFLLENBQUMsV0FBVyxHQUMvQixDQUFDO1lBQ0YsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0YsQ0FBQyxDQUFDLENBQUM7QUFPRiIsInNvdXJjZXMiOlsid2VicGFjazovL2J1ZGdldHMtYW5kLWluc2lnaHRzLy4vc3JjL2NsaWVudC9wYWdlcy9idWRnZXRzL2VkaXQtc2V0dGluZ3MvRWRpdEJ1ZGdldFNldHRpbmdzLnRzeCIsIndlYnBhY2s6Ly9idWRnZXRzLWFuZC1pbnNpZ2h0cy8uL3NyYy9jbGllbnQvc3RvcmUvYnVkZ2V0U2V0dGluZ3NTdG9yZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgTmF2QmFyIGZyb20gXCIuLi8uLi9jb21wb25lbnRzL05hdkJhclwiO1xuaW1wb3J0IE5hdkJhclRpdGxlIGZyb20gXCIuLi8uLi9jb21wb25lbnRzL05hdkJhclRpdGxlXCI7XG5pbXBvcnQgeyB1c2VOYXZpZ2F0ZSB9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XG5pbXBvcnQgeyBGaUJyaWVmY2FzZSwgRmlDbG91ZCwgRmlQaWVDaGFydCB9IGZyb20gXCJyZWFjdC1pY29ucy9maVwiO1xuaW1wb3J0IHsgQnVkZ2V0RGlzcGxheSB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2J1ZGdldC9CdWRnZXREaXNwbGF5XCI7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gXCJyZWFjdC1xdWVyeVwiO1xuaW1wb3J0IHsgZ2V0Q2F0ZWdvcmllcyB9IGZyb20gXCJjbGllbnQvYXBpL2NhdGVnb3JpZXNcIjtcbmltcG9ydCB7IElDb25maWcsIHVzZUNvbmZpZ3VyYXRpb25TdG9yZSB9IGZyb20gXCJjbGllbnQvc3RvcmUvY29uZmlndXJhdGlvblwiO1xuaW1wb3J0IHVzZUNhdGVnb3JpZXNTdG9yZSBmcm9tIFwiY2xpZW50L3N0b3JlL2NhdGVnb3JpZXNTdG9yZVwiO1xuaW1wb3J0IHsgQnVkZ2V0U2V0dGluZ0NhcmQgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9idWRnZXQvQnVkZ2V0U2V0dGluZ0NhcmRcIjtcbmltcG9ydCB7IEdlbmVyYWxJbmZvQ2FyZCB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2J1ZGdldC9HZW5lcmFsSW5mb0NhcmRcIjtcbmltcG9ydCB1c2VDdXJyZW5jeVNldHRpbmdzU3RvcmUgZnJvbSBcImNsaWVudC9zdG9yZS9jdXJyZW5jeVNldHRpbmdzU3RvcmVcIjtcbmltcG9ydCB7IGZldGNoTWFjcm9zLCBzYXZlQnVkZ2V0IH0gZnJvbSBcImNsaWVudC9hcGkvYnVkZ2V0XCI7XG5pbXBvcnQgZ2V0VG9rZW4gZnJvbSBcImNsaWVudC9hcGkvdG9rZW5cIjtcbmltcG9ydCB7IHNob3dDdXN0b21Ub2FzdCB9IGZyb20gXCJjbGllbnQvdXRpbHMvVG9hc3RcIjtcbmltcG9ydCB1c2VVc2VyU3RvcmUgZnJvbSBcImNsaWVudC9zdG9yZS91c2VyU3RvcmVcIjtcbmltcG9ydCBCYWNrQnV0dG9uIGZyb20gXCJjbGllbnQvcGFnZXMvY29tcG9uZW50cy9CYWNrQnV0dG9uXCI7XG5pbXBvcnQgeyB1c2VCdWRnZXRTZXR0aW5nc1N0b3JlIH0gZnJvbSBcImNsaWVudC9zdG9yZS9idWRnZXRTZXR0aW5nc1N0b3JlXCI7XG5pbXBvcnQgeyB1c2VTYXZpbmdzQm90dG9tU2hlZXRTdG9yZSB9IGZyb20gXCJjbGllbnQvc3RvcmUvYm90dG9tU2hlZXRTdG9yZVwiO1xuaW1wb3J0IHsgQm90dG9tU2hlZXQgfSBmcm9tIFwicmVhY3Qtc3ByaW5nLWJvdHRvbS1zaGVldFwiO1xuaW1wb3J0IFNhdmluZ3NHb2FsQ29uZmlybWF0aW9uIGZyb20gXCIuLi9TYXZpbmdzR29hbENvbmZpcm1hdGlvblwiO1xuaW1wb3J0IFN1Y2Nlc3NmdWxsQ3JlYXRlZFZpZXcgZnJvbSBcImNsaWVudC9wYWdlcy9jb21wb25lbnRzL2J1ZGdldC9TdWNjZXNzZnVsbENyZWF0ZWRWaWV3XCI7XG5pbXBvcnQgc3VjY2Vzc0ljb24gZnJvbSBcImNsaWVudC9hc3NldHMvaW1hZ2VzL3N1Y2Nlc3MtaWNvbi5zdmdcIjtcbmltcG9ydCB7IGFsbFRpbWVEZWJ0IH0gZnJvbSBcImNsaWVudC91dGlscy9Nb2NrRGF0YVwiO1xuaW1wb3J0IERlYnRWaWV3Q2FyZCBmcm9tIFwiY2xpZW50L3BhZ2VzL2NvbXBvbmVudHMvRGVidFZpZXdDYXJkXCI7XG5pbXBvcnQgeyBjaGVja05BTiB9IGZyb20gXCJjbGllbnQvdXRpbHMvRm9ybWF0dGVyc1wiO1xuXG5jb25zdCBFZGl0QnVkZ2V0U2V0dGluZ3MgPSAoKSA9PiB7XG4gIGNvbnN0IFtzYXZpbmdzU3VjY2Vzcywgc2V0U2F2aW5nc1N1Y2Nlc3NdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBzYXZpbmdzQm90dG9tU2hlZXRTdG9yZSA9IHVzZVNhdmluZ3NCb3R0b21TaGVldFN0b3JlKFxuICAgIChzdGF0ZTogYW55KSA9PiBzdGF0ZVxuICApO1xuICBjb25zdCBjb25maWd1cmF0aW9ucyA9IHVzZUNvbmZpZ3VyYXRpb25TdG9yZShcbiAgICAoc3RhdGU6IGFueSkgPT4gc3RhdGUuY29uZmlndXJhdGlvblxuICApIGFzIElDb25maWc7XG4gIGNvbnN0IGNhdGVnb3JpZXNTdG9yZSA9IHVzZUNhdGVnb3JpZXNTdG9yZSgoc3RhdGU6IGFueSkgPT4gc3RhdGUpO1xuICBjb25zdCBzZXRUb2tlbiA9IHVzZUNvbmZpZ3VyYXRpb25TdG9yZSgoc3RhdGU6IGFueSkgPT4gc3RhdGUuc2V0VG9rZW4pO1xuICBjb25zdCB1c2VyU3RvcmUgPSB1c2VVc2VyU3RvcmUoKHN0YXRlOiBhbnkpID0+IHN0YXRlKTtcbiAgY29uc3QgYnVkZ2V0U2V0dGluZ3NTdG9yZSA9IHVzZUJ1ZGdldFNldHRpbmdzU3RvcmUoKTtcbiAgY29uc3Qgc2V0VXNlciA9IHVzZXJTdG9yZS5zZXRVc2VyO1xuICBjb25zdCB7IGRhdGEgfSA9IHVzZVF1ZXJ5KFxuICAgIFtcInRva2VuXCJdLFxuICAgICgpID0+XG4gICAgICBnZXRUb2tlbihjb25maWd1cmF0aW9ucykudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVzLnVzZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBzZXRVc2VyKHJlcy51c2VyKTtcbiAgICAgICAgICBzZXRUb2tlbihyZXMudG9rZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hdmlnYXRlKFwiL1wiKTtcbiAgICAgICAgICBzaG93Q3VzdG9tVG9hc3QoeyBtZXNzYWdlOiBcIlRoZSBzZGsga2V5IGlzIGludmFsaWRcIiB9KTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgeyByZWZldGNoT25XaW5kb3dGb2N1czogZmFsc2UgfVxuICApO1xuICBjb25zdCBtYXBDYXRlZ29yeVRvRGF0YSA9IChjYXRlZ29yeTogYW55LCBpbmRleDogbnVtYmVyKSA9PiBbXG4gICAgYGRhdGEke2luZGV4fWAsXG4gICAge1xuICAgICAgYW1vdW50OiBjYXRlZ29yeT8uYW1vdW50IHx8IDAsXG4gICAgICBjb250cmlidXRpb25fYW1vdW50OiAwLFxuICAgICAgcGVyY2VudGFnZTogMCxcbiAgICAgIGNhdGVnb3J5X2lkOiBjYXRlZ29yeT8uY2F0ZWdvcnkuaWQsXG4gICAgICBuYW1lOiBjYXRlZ29yeT8ubmFtZSxcbiAgICAgIHBzZXVkb19uYW1lOiBjYXRlZ29yeT8ubmFtZSArIFwiIFwiICsgY2F0ZWdvcnk/LmNhdGVnb3J5LmVtb2ppLFxuICAgICAgZXh0ZXJuX2lkOiBjYXRlZ29yeT8uY2F0ZWdvcnkuaWQsXG4gICAgICBvcmRlcjogMCxcbiAgICAgIGNvbnRyaWJ1dGlvbl9hdDogXCJcIixcbiAgICAgIGlzX2NvbnRyaWJ1dGVfY3VzdG9taXplZDogdHJ1ZSxcbiAgICB9LFxuICBdO1xuICBjb25zdCB7IGlzRmV0Y2hpbmc6IGZldGNoaW5nQ2F0ZWdvcmllcyB9ID0gdXNlUXVlcnkoXG4gICAgXCJmZXRjaC1jYXRlZ29yaWVzXCIsXG4gICAgKCkgPT5cbiAgICAgIGdldENhdGVnb3JpZXMoeyBjb25maWd1cmF0aW9uOiBjb25maWd1cmF0aW9ucyB9KS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgY2F0ZWdvcmllc1N0b3JlLnNldENhdGVnb3JpZXMocmVzdWx0KTtcblxuICAgICAgICBjb25zdCBtYXBwZXIgPSAodHlwZTogc3RyaW5nKSA9PiAoY2F0ZWdvcnk6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgIGNhdGVnb3J5Lm1hY3JvX3R5cGU/Lm5hbWUgPT09IHR5cGVcbiAgICAgICAgICAgID8gbWFwQ2F0ZWdvcnlUb0RhdGEoY2F0ZWdvcnksIGluZGV4KVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGVzc2VudGlhbHNEYXRhID0gcmVzdWx0Lm1hcChtYXBwZXIoXCJFc3NlbnRpYWxzXCIpKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgIGNvbnN0IHdhbnRzRGF0YSA9IHJlc3VsdC5tYXAobWFwcGVyKFwiV2FudHNcIikpLmZpbHRlcihCb29sZWFuKTtcblxuICAgICAgICBzZXRFc3NlbnRpYWxzTWFwU3RhdGUobmV3IE1hcChlc3NlbnRpYWxzRGF0YSkpO1xuICAgICAgICBzZXRXYW50c01hcFN0YXRlKG5ldyBNYXAod2FudHNEYXRhKSk7XG4gICAgICB9KSxcbiAgICB7IHJlZmV0Y2hPbldpbmRvd0ZvY3VzOiBmYWxzZSB9XG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplTWFwU3RhdGUgPSAoaW5kZXg6IG51bWJlciwgc2V0U3RhdGVGbjogRnVuY3Rpb24pID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgY2F0ZWdvcmllc1N0b3JlLmNhdGVnb3J5QnVkZ2V0cyAmJlxuICAgICAgICBjYXRlZ29yaWVzU3RvcmUuY2F0ZWdvcnlCdWRnZXRzLmxlbmd0aCA+IGluZGV4XG4gICAgICApIHtcbiAgICAgICAgY29uc3QgaW5pdGlhbERhdGEgPVxuICAgICAgICAgIGNhdGVnb3JpZXNTdG9yZS5jYXRlZ29yeUJ1ZGdldHNbaW5kZXhdLmRhdGEubWFwKG1hcENhdGVnb3J5VG9EYXRhKTtcbiAgICAgICAgc2V0U3RhdGVGbihuZXcgTWFwKGluaXRpYWxEYXRhKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGluaXRpYWxpemVNYXBTdGF0ZSgwLCBzZXRFc3NlbnRpYWxzTWFwU3RhdGUpO1xuICAgIGluaXRpYWxpemVNYXBTdGF0ZSgxLCBzZXRXYW50c01hcFN0YXRlKTtcbiAgfSwgW2NhdGVnb3JpZXNTdG9yZS5jYXRlZ29yeUJ1ZGdldHNdKTtcblxuICBjb25zdCB7IGlzRmV0Y2hpbmc6IGZldGNoaW5nTWFjcm9zIH0gPSB1c2VRdWVyeShcbiAgICBcImZldGNoLW1hY3Jvc1wiLFxuICAgICgpID0+XG4gICAgICBmZXRjaE1hY3Jvcyh7IGNvbmZpZ3VyYXRpb246IGNvbmZpZ3VyYXRpb25zIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjYXRlZ29yaWVzU3RvcmUuc2V0TWFjcm9zKHJlcyk7XG4gICAgICB9KSxcbiAgICB7IHJlZmV0Y2hPbldpbmRvd0ZvY3VzOiBmYWxzZSwgZW5hYmxlZDogISFjb25maWd1cmF0aW9ucy50b2tlbiB9XG4gICk7XG4gIGNvbnN0IG5hdmlnYXRlID0gdXNlTmF2aWdhdGUoKTtcbiAgY29uc3QgY3VycmVuY3lTeW1ib2wgPSB1c2VDdXJyZW5jeVNldHRpbmdzU3RvcmUoXG4gICAgKHN0YXRlOiBhbnkpID0+IHN0YXRlLmN1cnJlbmN5U3ltYm9sXG4gICk7XG4gIGNvbnN0IFtlc3NlbnRpYWxzTWFwU3RhdGUsIHNldEVzc2VudGlhbHNNYXBTdGF0ZV0gPSB1c2VTdGF0ZShuZXcgTWFwKCkpO1xuICBjb25zdCBbd2FudHNNYXBTdGF0ZSwgc2V0V2FudHNNYXBTdGF0ZV0gPSB1c2VTdGF0ZShuZXcgTWFwKCkpO1xuICBjb25zdCB1cGRhdGVFc3NlbnRpYWxzTWFwID0gKGk6IG51bWJlciwgZGF0YTogYW55KSA9PiB7XG4gICAgc2V0RXNzZW50aWFsc01hcFN0YXRlKChtYXApID0+IG5ldyBNYXAobWFwLnNldChgZGF0YSR7aX1gLCBkYXRhKSkpO1xuICB9O1xuICBjb25zdCB1cGRhdGVXYW50c01hcCA9IChpOiBudW1iZXIsIGRhdGE6IGFueSkgPT4ge1xuICAgIHNldFdhbnRzTWFwU3RhdGUoKG1hcCkgPT4gbmV3IE1hcChtYXAuc2V0KGBkYXRhJHtpfWAsIGRhdGEpKSk7XG4gIH07XG4gIC8vZXNzZW50aWFsc1xuICBjb25zdCBlc3NlbnRpYWxzTGlzdCA9IEFycmF5LmZyb20oZXNzZW50aWFsc01hcFN0YXRlLCAoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgcmV0dXJuIHsgW2tleV06IHZhbHVlIH07XG4gIH0pLm1hcCgoZWxlbWVudDogYW55LCBpOiBudW1iZXIpID0+IHtcbiAgICByZXR1cm4gZWxlbWVudFtgZGF0YSR7aX1gXTtcbiAgfSk7XG5cbiAgLy93YW50c1xuICBjb25zdCB3YW50c0xpc3QgPSBBcnJheS5mcm9tKHdhbnRzTWFwU3RhdGUsIChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICByZXR1cm4geyBba2V5XTogdmFsdWUgfTtcbiAgfSkubWFwKChlbGVtZW50OiBhbnksIGk6IG51bWJlcikgPT4ge1xuICAgIHJldHVybiBlbGVtZW50W2BkYXRhJHtpfWBdO1xuICB9KTtcbiAgY29uc3QgbmF2aWdhdG9yID0gdXNlTmF2aWdhdGUoKTtcbiAgY29uc3QgbWFjcm9EYXRhID0gY2F0ZWdvcmllc1N0b3JlLm1hY3Jvcz8uZGF0YSA/PyBbXTtcbiAgY29uc3QgZXNzZW50aWFsTWFjcm8gPSBtYWNyb0RhdGFbMF07XG4gIGNvbnN0IHdhbnRzbE1hY3JvID0gbWFjcm9EYXRhWzFdO1xuICBjb25zdCBzYXZpbmdzTWFjcm8gPSBtYWNyb0RhdGFbMl07XG4gIGNvbnN0IGVzc2VudGlhbEdvYWxzID0gZXNzZW50aWFsTWFjcm8/LmdvYWxzID8/IFtdO1xuICBjb25zdCB3YW50c0dvYWxzID0gd2FudHNsTWFjcm8/LmdvYWxzID8/IFtdO1xuICBjb25zdCBzYXZpbmdzR29hbHMgPSBzYXZpbmdzTWFjcm8/LmdvYWxzID8/IFtdO1xuICBjb25zdCBlc3NlbnRpYWxCdWRnZXRBbW91bnQgPSBlc3NlbnRpYWxHb2Fsc1swXT8uYW1vdW50ID8/IFwiXCI7XG4gIGNvbnN0IFthbGxvY2F0ZWRFc3NlbnRpYWxzLCBzZXRBbGxvY2F0ZWRFc3NlbnRpYWxzXSA9IHVzZVN0YXRlKFxuICAgIHR5cGVvZiBjYXRlZ29yaWVzU3RvcmUuY2F0ZWdvcnlCdWRnZXRzWzBdICE9PSB1bmRlZmluZWRcbiAgICAgID8gY2F0ZWdvcmllc1N0b3JlPy5jYXRlZ29yeUJ1ZGdldHNbMF0udG90YWxfYW1vdW50XG4gICAgICA6IDBcbiAgKTtcbiAgY29uc3Qgd2FudHNCdWRnZXRBbW91bnQgPSB3YW50c0dvYWxzWzBdPy5hbW91bnQgPz8gXCJcIjtcbiAgY29uc3QgW2FsbG9jYXRlZFdhbnRzLCBzZXRBbGxvY2F0ZWRXYW50c10gPSB1c2VTdGF0ZShcbiAgICB0eXBlb2YgY2F0ZWdvcmllc1N0b3JlLmNhdGVnb3J5QnVkZ2V0c1sxXSAhPT0gdW5kZWZpbmVkXG4gICAgICA/IGNhdGVnb3JpZXNTdG9yZT8uY2F0ZWdvcnlCdWRnZXRzWzFdPy50b3RhbF9hbW91bnRcbiAgICAgIDogMFxuICApO1xuICBjb25zdCBzYXZpbmdzQnVkZ2V0QW1vdW50ID0gc2F2aW5nc0dvYWxzWzBdPy5hbW91bnQgPz8gXCJcIjtcbiAgY29uc3QgW2FsbG9jYXRlZFNhdmluZ3MsIHNldEFsbG9jYXRlZFNhdmluZ3NdID0gdXNlU3RhdGUoXG4gICAgdHlwZW9mIGNhdGVnb3JpZXNTdG9yZS5jYXRlZ29yeUJ1ZGdldHNbMl0gIT09IHVuZGVmaW5lZFxuICAgICAgPyBjYXRlZ29yaWVzU3RvcmU/LmNhdGVnb3J5QnVkZ2V0c1syXS50b3RhbF9hbW91bnRcbiAgICAgIDogMFxuICApO1xuICBjb25zdCBbYWRkU2F2aW5ncywgc2V0QWRkU2F2aW5nc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzYXZpbmdzTGlzdCwgc2V0U2F2aW5nc0xpc3RdID0gdXNlU3RhdGUoW3t9XSk7XG4gIGNvbnN0IGJ1ZGdldFN0b3JlID0gdXNlQnVkZ2V0U2V0dGluZ3NTdG9yZSgoc3RhdGU6IGFueSkgPT4gc3RhdGUpO1xuICBjb25zdCB7IGlzRmV0Y2hpbmc6IHNhdmluZ0J1ZGdldERldGFpbHMsIHJlZmV0Y2g6IHNhdmVCdWRnZXRJbmZvIH0gPSB1c2VRdWVyeShcbiAgICBcInNhdmUtYnVkZ2V0XCIsXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgbWFjcm90eXBlRW50cmllcyA9IFtdO1xuXG4gICAgICBpZiAoZXNzZW50aWFsc0xpc3Quc29tZSgoaXRlbSkgPT4gT2JqZWN0LmtleXMoaXRlbSkubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgbWFjcm90eXBlRW50cmllcy5wdXNoKHtcbiAgICAgICAgICBtYWNyb3R5cGVfbmFtZTogXCJFc3NlbnRpYWxzXCIsXG4gICAgICAgICAgZGF0YTogZXNzZW50aWFsc0xpc3QsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAod2FudHNMaXN0LnNvbWUoKGl0ZW0pID0+IE9iamVjdC5rZXlzKGl0ZW0pLmxlbmd0aCA+IDApKSB7XG4gICAgICAgIG1hY3JvdHlwZUVudHJpZXMucHVzaCh7XG4gICAgICAgICAgbWFjcm90eXBlX25hbWU6IFwiV2FudHNcIixcbiAgICAgICAgICBkYXRhOiB3YW50c0xpc3QsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2F2aW5nc0xpc3Quc29tZSgoaXRlbSkgPT4gT2JqZWN0LmtleXMoaXRlbSkubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgbWFjcm90eXBlRW50cmllcy5wdXNoKHtcbiAgICAgICAgICBtYWNyb3R5cGVfbmFtZTogXCJTYXZpbmdzXCIsXG4gICAgICAgICAgZGF0YTogc2F2aW5nc0xpc3QsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2F2ZUJ1ZGdldCh7XG4gICAgICAgIGNvbmZpZ3VyYXRpb246IGNvbmZpZ3VyYXRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbWFjcm90eXBlX2VudHJpZXM6IG1hY3JvdHlwZUVudHJpZXMsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHsgcmVmZXRjaE9uV2luZG93Rm9jdXM6IGZhbHNlLCBlbmFibGVkOiBmYWxzZSB9XG4gICk7XG4gIGNvbnN0IFtzZWxlY3RlZFNhdmluZ3NHb2FsLCBzZXRTZWxlY3RlZFNhdmluZ3NHb2FsXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICB9KTtcbiAgY29uc3QgdG90YWxEZWJ0ID0gYWxsVGltZURlYnQucmVkdWNlKChhY2N1bXVsYXRvciwgaXRlbSkgPT4ge1xuICAgIHJldHVybiAoYWNjdW11bGF0b3IgKz0gaXRlbS5hbW91bnQpO1xuICB9LCAwKTtcbiAgY29uc3QgdXNlciA9IHVzZVVzZXJTdG9yZSgoc3RhdGU6IGFueSkgPT4gc3RhdGUpO1xuICBjb25zdCBsaW5rZWRBY2NvdW50cyA9IHVzZXIudXNlci5leHRlcm5hbF9saW5rZWRfYWNjb3VudHMuZmluZChcbiAgICAoZWxlbWVudDogYW55KSA9PiBlbGVtZW50Py5uYW1lID09PSBcIk0tUGVzYVwiXG4gICk7XG4gIGNvbnN0IGZpbmFsTGlua2VkQWNjb3VudHMgPSBbbGlua2VkQWNjb3VudHNdO1xuICBjb25zdCBudW1iZXJPZkxpbmtlZEFjY291bnRzID0gZmluYWxMaW5rZWRBY2NvdW50cy5sZW5ndGggPz8gMDtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImgtc2NyZWVuIHctc2NyZWVuXCI+XG4gICAgICA8TmF2QmFyXG4gICAgICAgIGNoaWxkcmVuPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1yb3cgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBib3JkZXIgYm9yZGVyLWItMSBwdC00IHBiLTIgcHItMy41XCI+XG4gICAgICAgICAgICA8QmFja0J1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gY2FsbCBzYXZlLWJ1ZGdldCBoZXJlXG4gICAgICAgICAgICAgICAgc2F2ZUJ1ZGdldEluZm8oKTtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0ZShcIi9idWRnZXRzLXZpZXdcIik7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPE5hdkJhclRpdGxlIHRpdGxlPVwiXCIgLz5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC02IHctNiByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBuYXZpZ2F0ZShcIi92aWV3LWluZm9cIil9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHsvKiA8RmlJbmZvIGNvbG9yPVwiIzEwMTAxMFwiIHNpemU9XCIxLjVyZW1cIiAvPiAqL31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAvPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG14LTMuNVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTMgbXQtNVwiPlxuICAgICAgICAgIDxHZW5lcmFsSW5mb0NhcmRcbiAgICAgICAgICAgIGljb25CZz1cImJnLXNraW4taWNvblByaW1hcnlcIlxuICAgICAgICAgICAgaWNvbj17PEZpQ2xvdWQgLz59XG4gICAgICAgICAgICB0aXRsZT1cIkxpbmtlZCBhY2NvdW50c1wiXG4gICAgICAgICAgICBzdWJ0aXRsZT1cIlRyYWNrIHlvdXIgc3BlbmRpbmcgZWFzaWx5IGFjcm9zcyBsaW5rZWQgYWNjb3VudHMgYW5kIHN0YXkgb24gdG9wIG9mIHlvdXIgYnVkZ2V0IHdpdGggaW5zaWdodHMuXCJcbiAgICAgICAgICAgIGNhcHRpb249e2Ake1xuICAgICAgICAgICAgICB0eXBlb2YgbnVtYmVyT2ZMaW5rZWRBY2NvdW50cyA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICAgICAgID8gXCJcIlxuICAgICAgICAgICAgICAgIDogY2hlY2tOQU4obnVtYmVyT2ZMaW5rZWRBY2NvdW50cylcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICBuYXZpZ2F0ZShcIi9saW5rZWQtYWNjb3VudHNcIik7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTNcIj5cbiAgICAgICAgICA8R2VuZXJhbEluZm9DYXJkXG4gICAgICAgICAgICBpY29uQmc9XCJiZy1za2luLXN1Y2Nlc3NXaXRoT3BhY2l0eVwiXG4gICAgICAgICAgICBpY29uPXs8RmlCcmllZmNhc2UgLz59XG4gICAgICAgICAgICB0aXRsZT1cIk1vbnRobHkgbmV0IGluY29tZVwiXG4gICAgICAgICAgICBzdWJ0aXRsZT1cIlRoaXMgaXMgdXNlZCBhcyB0aGUgYmFzaXMgZm9yIGNhbGN1bGF0aW5nIHlvdXIgb3ZlcmFsbCBidWRnZXQgc3BsaXQuXCJcbiAgICAgICAgICAgIGNhcHRpb249e2Ake1xuICAgICAgICAgICAgICBidWRnZXRTZXR0aW5nc1N0b3JlLm1vbnRobHlJbmNvbWUgIT09IDBcbiAgICAgICAgICAgICAgICA/IGJ1ZGdldFNldHRpbmdzU3RvcmUubW9udGhseUluY29tZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgOiB1c2VyU3RvcmUudXNlcj8uaW5jb21lPy50b1N0cmluZygpID8/IFwiXCJcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgY3VycmVuY3lTeW1ib2w9e2N1cnJlbmN5U3ltYm9sfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gbmF2aWdhdGUoXCIvZWRpdC1tb250aGx5LWluY29tZVwiKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPEdlbmVyYWxJbmZvQ2FyZFxuICAgICAgICAgIGljb25CZz1cImJnLXNraW4tc2Vjb25kYXJ5M1dpdGhPcGFjaXR5XCJcbiAgICAgICAgICBpY29uPXs8RmlQaWVDaGFydCAvPn1cbiAgICAgICAgICB0aXRsZT1cIkJ1ZGdldCBzcGxpdFwiXG4gICAgICAgICAgc3VidGl0bGU9XCJXZSByZWNvbW1lbmQgcmVzZXJ2aW5nIDcwJSBvZiB5b3VyIGluY29tZSBhZnRlciB5b3VyIG1vbnRobHkgZGVidCByZXBheW1lbnQgY29tbWl0bWVudHMgdG8gRXNzZW50aWFscyB0aGVuIDMwJSBmb3IgV2FudHMuIFRhcCBoZXJlIHRvIGVkaXQuXCJcbiAgICAgICAgICBjYXB0aW9uPXtgJHtjYXRlZ29yaWVzU3RvcmUubWFjcm9zPy5idWRnZXRfc3BsaXQgPz8gXCJcIn1gfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgIGlmIChjYXRlZ29yaWVzU3RvcmUubWFjcm9zPy5idWRnZXRfc3BsaXQpIHtcbiAgICAgICAgICAgICAgbmF2aWdhdGUoXCIvZWRpdC1zcGxpdC1pbmNvbWVcIik7XG4gICAgICAgICAgICAgIGJ1ZGdldFN0b3JlLnNldE1vbnRobHlJbmNvbWUodXNlclN0b3JlLnVzZXI/LmluY29tZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00IG10LTUgZmxleCBmbGV4LXJvdyBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHgtMy41XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LWdyb3cgaC1weCBiZy1za2luLWFjY2VudDNcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgIDxGaVBpZUNoYXJ0IHNpemU9XCIxLjVyZW1cIiBjb2xvcj1cIiM1NTU0NjZcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1ncm93IGgtcHggYmctc2tpbi1hY2NlbnQzXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1jYXJkIHB4LTQgcHQtNSBwYi0zIG10LTQuNSByb3VuZGVkLWxnIG1iLTRcIj5cbiAgICAgICAgICA8QnVkZ2V0RGlzcGxheVxuICAgICAgICAgICAgdGl0bGU9XCJEZWJ0IHJlcGF5bWVudFwiXG4gICAgICAgICAgICBidWRnZXRBbW91bnQ9e3NhdmluZ3NCdWRnZXRBbW91bnR9XG4gICAgICAgICAgICBwZXJjZW50YWdlT2ZCdWRnZXRDYXB0aW9uPXtgJHtcbiAgICAgICAgICAgICAgc2F2aW5nc0dvYWxzWzBdPy5zaGFyZSA/PyBcIlwiXG4gICAgICAgICAgICB9JSBvZiBvdmVyYWxsIGJ1ZGdldGB9XG4gICAgICAgICAgICB1bmFsbG9jYXRlZENhcHRpb249XCJVbmFsbG9jYXRlZFwiXG4gICAgICAgICAgICBhbGxvY2F0ZWRDYXB0aW9uPVwiQWxsb2NhdGVkXCJcbiAgICAgICAgICAgIHVuYWxsb2NhdGVkQW1vdW50PXswfVxuICAgICAgICAgICAgYWxsb2NhdGVkQW1vdW50PXt0b3RhbERlYnR9XG4gICAgICAgICAgICBwcm9ncmVzc1BlcmNlbnRhZ2U9ezEwMH1cbiAgICAgICAgICAgIGluZGljYXRvckNvbG9yPVwiYmctWyMwMzZBQjNdXCJcbiAgICAgICAgICAgIHByb2dyZXNzQ29sb3I9XCIjMDM2QUIzXCJcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyIG10LTQgbWItNC41XCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1yb3cganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi00XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRyYWNraW5nLXdpZGUgZm9udC1tZWRpdW0gdGV4dC1za2luLXN1YnRpdGxlIGZvbnQtcHJpbWFyeVwiPlxuICAgICAgICAgICAgICAgICAgQ2F0ZWdvcmllc1xuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0cmFja2luZy13aWRlIGZvbnQtbWVkaXVtIHRleHQtc2tpbi1zdWJ0aXRsZSBmb250LXByaW1hcnlcIj5cbiAgICAgICAgICAgICAgICAgIEJ1ZGdldCBhbGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7YWxsVGltZURlYnQ/Lm1hcCgoZGVidDogYW55LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxEZWJ0Vmlld0NhcmRcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtjaGVja05BTihcbiAgICAgICAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKGRlYnQ/LmxvYW5EZXRhaWxzLm1vbnRobHlQYXltZW50KVxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICBpY29uPXtkZWJ0Py5pY29ufVxuICAgICAgICAgICAgICAgICAgICBnb2FsPXtkZWJ0Py5uYW1lfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctY2FyZCBweC00IHB0LTUgcGItMyByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgPEJ1ZGdldERpc3BsYXlcbiAgICAgICAgICAgIHRpdGxlPVwiRXNzZW50aWFsc1wiXG4gICAgICAgICAgICBidWRnZXRBbW91bnQ9e2Vzc2VudGlhbEJ1ZGdldEFtb3VudCA/PyAwfVxuICAgICAgICAgICAgcGVyY2VudGFnZU9mQnVkZ2V0Q2FwdGlvbj17YCR7XG4gICAgICAgICAgICAgIGVzc2VudGlhbEdvYWxzWzBdPy5zaGFyZSA/PyBcIlwiXG4gICAgICAgICAgICB9JSBvZiBvdmVyYWxsIGJ1ZGdldGB9XG4gICAgICAgICAgICB1bmFsbG9jYXRlZENhcHRpb249XCJVbmFsbG9jYXRlZFwiXG4gICAgICAgICAgICBhbGxvY2F0ZWRDYXB0aW9uPVwiQWxsb2NhdGVkXCJcbiAgICAgICAgICAgIHVuYWxsb2NhdGVkQW1vdW50PXtcbiAgICAgICAgICAgICAgdHlwZW9mIHBhcnNlSW50KGVzc2VudGlhbEJ1ZGdldEFtb3VudCkgPT09IFwibnVtYmVyXCIgJiZcbiAgICAgICAgICAgICAgZXNzZW50aWFsQnVkZ2V0QW1vdW50ID4gMFxuICAgICAgICAgICAgICAgID8gTWF0aC5tYXgoZXNzZW50aWFsQnVkZ2V0QW1vdW50IC0gYWxsb2NhdGVkRXNzZW50aWFscywgMClcbiAgICAgICAgICAgICAgICA6IDAgLy8gRW5zdXJlIHBlcmNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFsbG9jYXRlZEFtb3VudD17YWxsb2NhdGVkRXNzZW50aWFsc31cbiAgICAgICAgICAgIHByb2dyZXNzUGVyY2VudGFnZT17XG4gICAgICAgICAgICAgIHR5cGVvZiBwYXJzZUludChlc3NlbnRpYWxCdWRnZXRBbW91bnQpID09PSBcIm51bWJlclwiICYmXG4gICAgICAgICAgICAgIGVzc2VudGlhbEJ1ZGdldEFtb3VudCA+IDBcbiAgICAgICAgICAgICAgICA/IE1hdGgubWluKFxuICAgICAgICAgICAgICAgICAgICAoYWxsb2NhdGVkRXNzZW50aWFscyAvIGVzc2VudGlhbEJ1ZGdldEFtb3VudCkgKiAxMDAsXG4gICAgICAgICAgICAgICAgICAgIDEwMFxuICAgICAgICAgICAgICAgICAgKSAvLyBFbnN1cmUgcGVyY2VudGFnZSBzdGF5cyBiZXR3ZWVuIDAgYW5kIDEwMFxuICAgICAgICAgICAgICAgIDogMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvZ3Jlc3NDb2xvcj1cIiMwMDlGRENcIlxuICAgICAgICAgICAgaW5kaWNhdG9yQ29sb3I9XCJiZy1bIzAwOUZEQ11cIlxuICAgICAgICAgIC8+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtcm93IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBtdC02IG1iLTRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1za2luLWJhc2UgZm9udC1wcmltYXJ5IHRleHQteHMgdHJhY2tpbmctd2lkZVwiPlxuICAgICAgICAgICAgICBBZGQgYnVkZ2V0cyB0byB5b3VyIEVzc2VudGlhbHMgYmVsb3dcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyIG10LTQgbWItNC41XCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtcm93IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRyYWNraW5nLXdpZGUgZm9udC1tZWRpdW0gdGV4dC1za2luLXN1YnRpdGxlIGZvbnQtcHJpbWFyeVwiPlxuICAgICAgICAgICAgICBDYXRlZ29yaWVzXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0cmFja2luZy13aWRlIGZvbnQtbWVkaXVtIHRleHQtc2tpbi1zdWJ0aXRsZSBmb250LXByaW1hcnlcIj5cbiAgICAgICAgICAgICAgQnVkZ2V0IGFsbG9jYXRpb25cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAge2NhdGVnb3JpZXNTdG9yZS5jYXRlZ29yeUJ1ZGdldHNbMF0gJiZcbiAgICAgICAgICAgIGNhdGVnb3JpZXNTdG9yZS5jYXRlZ29yeUJ1ZGdldHNbMF0uZGF0YT8ubGVuZ3RoID4gMFxuICAgICAgICAgICAgICA/IGNhdGVnb3JpZXNTdG9yZS5jYXRlZ29yeUJ1ZGdldHNbMF0uZGF0YS5tYXAoXG4gICAgICAgICAgICAgICAgICAoY2F0ZWdvcnk6IGFueSwgaTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBlc3NlbnRpYWxzTWFwU3RhdGUuZ2V0KGBkYXRhJHtpfWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbml0aWFsQW1vdW50ID0gY2F0ZWdvcnk/LmFtb3VudCB8fCAwO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGp1c3RtZW50ID0gZGF0YT8uYW1vdW50IHx8IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICA8QnVkZ2V0U2V0dGluZ0NhcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5PXtjYXRlZ29yeT8ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVtb2ppPXtjYXRlZ29yeT8uY2F0ZWdvcnkuZW1vaml9XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2RhdGE/LmFtb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFZhbHVlPXtOdW1iZXIuTUFYX1NBRkVfSU5URUdFUn1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVuYWxsb2NhdGVkQW1vdW50PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHBhcnNlSW50KGVzc2VudGlhbEJ1ZGdldEFtb3VudCkgPT09IFwibnVtYmVyXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXNzZW50aWFsQnVkZ2V0QW1vdW50ID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gTWF0aC5tYXgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzc2VudGlhbEJ1ZGdldEFtb3VudCAtIGFsbG9jYXRlZEVzc2VudGlhbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFZhbHVlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVFc3NlbnRpYWxzTWFwKGksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFsbG9jYXRlZEVzc2VudGlhbHMoYWxsb2NhdGVkRXNzZW50aWFscyArIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlPXsobmV3VmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBkYXRhPy5hbW91bnQgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVEaWZmZXJlbmNlID0gbmV3VmFsdWUgLSBvbGRWYWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBbGxvY2F0ZWRFc3NlbnRpYWxzID0gTWF0aC5tYXgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvY2F0ZWRFc3NlbnRpYWxzICsgdmFsdWVEaWZmZXJlbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0FsbG9jYXRlZEVzc2VudGlhbHMgPD0gZXNzZW50aWFsQnVkZ2V0QW1vdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWxsb2NhdGVkRXNzZW50aWFscyhuZXdBbGxvY2F0ZWRFc3NlbnRpYWxzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVFc3NlbnRpYWxzTWFwKGksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDdXN0b21Ub2FzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkJ1ZGdldCBsaW1pdCBleGNlZWRlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50PXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0Ftb3VudCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRhdGE/LmFtb3VudCB8fCAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllc1N0b3JlLmluY3JlbWVudGFsQW1vdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEFsbG9jYXRlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGVkRXNzZW50aWFscyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllc1N0b3JlLmluY3JlbWVudGFsQW1vdW50O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3RhbEFsbG9jYXRlZCA8PSBlc3NlbnRpYWxCdWRnZXRBbW91bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBbGxvY2F0ZWRFc3NlbnRpYWxzKHRvdGFsQWxsb2NhdGVkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUVzc2VudGlhbHNNYXAoaSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3QW1vdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBuZXcgdG90YWwgYWxsb2NhdGVkIGJ1ZGdldCBleGNlZWRzIHRoZSBsaW1pdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDdXN0b21Ub2FzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkJ1ZGdldCBsaW1pdCBleGNlZWRlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVjcmVtZW50PXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUVzc2VudGlhbHNNYXAoaSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBNYXRoLm1heChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkanVzdG1lbnQgLSBjYXRlZ29yaWVzU3RvcmUuaW5jcmVtZW50YWxBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFsbG9jYXRlZEVzc2VudGlhbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGVkRXNzZW50aWFscyAtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzU3RvcmUuaW5jcmVtZW50YWxBbW91bnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIDogbnVsbH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LWNhcmQgcHgtNCBwdC01IHBiLTMgbXQtNC41IHJvdW5kZWQtbGdcIj5cbiAgICAgICAgICA8QnVkZ2V0RGlzcGxheVxuICAgICAgICAgICAgdGl0bGU9XCJXYW50c1wiXG4gICAgICAgICAgICBidWRnZXRBbW91bnQ9e3dhbnRzQnVkZ2V0QW1vdW50ID8/IDB9XG4gICAgICAgICAgICBwZXJjZW50YWdlT2ZCdWRnZXRDYXB0aW9uPXtgJHtcbiAgICAgICAgICAgICAgd2FudHNHb2Fsc1swXT8uc2hhcmUgPz8gXCJcIlxuICAgICAgICAgICAgfSUgb2Ygb3ZlcmFsbCBidWRnZXRgfVxuICAgICAgICAgICAgdW5hbGxvY2F0ZWRDYXB0aW9uPVwiVW5hbGxvY2F0ZWRcIlxuICAgICAgICAgICAgYWxsb2NhdGVkQ2FwdGlvbj1cIkFsbG9jYXRlZFwiXG4gICAgICAgICAgICB1bmFsbG9jYXRlZEFtb3VudD17XG4gICAgICAgICAgICAgIHR5cGVvZiB3YW50c0J1ZGdldEFtb3VudCA9PT0gXCJudW1iZXJcIiB8fCB3YW50c0J1ZGdldEFtb3VudCA+IDBcbiAgICAgICAgICAgICAgICA/IE1hdGgubWF4KHdhbnRzQnVkZ2V0QW1vdW50IC0gYWxsb2NhdGVkV2FudHMsIDApIC8vIEVuc3VyZSBwZXJjZW50YWdlIHN0YXlzIGJldHdlZW4gMCBhbmQgMTAwXG4gICAgICAgICAgICAgICAgOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbGxvY2F0ZWRBbW91bnQ9e2FsbG9jYXRlZFdhbnRzID8/IDB9XG4gICAgICAgICAgICBwcm9ncmVzc1BlcmNlbnRhZ2U9e1xuICAgICAgICAgICAgICB0eXBlb2Ygd2FudHNCdWRnZXRBbW91bnQgPT09IFwibnVtYmVyXCIgJiYgd2FudHNCdWRnZXRBbW91bnQgPiAwXG4gICAgICAgICAgICAgICAgPyBNYXRoLm1pbigoYWxsb2NhdGVkV2FudHMgLyB3YW50c0J1ZGdldEFtb3VudCkgKiAxMDAsIDEwMCkgLy8gRW5zdXJlIHBlcmNlbnRhZ2Ugc3RheXMgYmV0d2VlbiAwIGFuZCAxMDBcbiAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb2dyZXNzQ29sb3I9XCIjMzU0QUE2XCJcbiAgICAgICAgICAgIGluZGljYXRvckNvbG9yPVwiYmctWyMzNTRBQTZdXCJcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXJvdyBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbXQtNiBtYi00XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc2tpbi1iYXNlIGZvbnQtcHJpbWFyeSB0ZXh0LXhzIHRyYWNraW5nLXdpZGVcIj5cbiAgICAgICAgICAgICAgQWRkIGJ1ZGdldHMgdG8geW91ciBXYW50cyBiZWxvd1xuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXIgbXQtNCBtYi00LjVcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1yb3cganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi00XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdHJhY2tpbmctd2lkZSBmb250LW1lZGl1bSB0ZXh0LXNraW4tc3VidGl0bGUgZm9udC1wcmltYXJ5XCI+XG4gICAgICAgICAgICAgIENhdGVnb3JpZXNcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRyYWNraW5nLXdpZGUgZm9udC1tZWRpdW0gdGV4dC1za2luLXN1YnRpdGxlIGZvbnQtcHJpbWFyeVwiPlxuICAgICAgICAgICAgICBCdWRnZXQgYWxsb2NhdGlvblxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICB7Y2F0ZWdvcmllc1N0b3JlLmNhdGVnb3J5QnVkZ2V0c1sxXSAmJlxuICAgICAgICAgICAgY2F0ZWdvcmllc1N0b3JlLmNhdGVnb3J5QnVkZ2V0c1sxXS5kYXRhPy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgID8gY2F0ZWdvcmllc1N0b3JlLmNhdGVnb3J5QnVkZ2V0c1sxXS5kYXRhLm1hcChcbiAgICAgICAgICAgICAgICAgIChjYXRlZ29yeTogYW55LCBpOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHdhbnRzTWFwU3RhdGUuZ2V0KGBkYXRhJHtpfWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbml0aWFsQW1vdW50ID0gY2F0ZWdvcnk/LmFtb3VudCB8fCAwO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGp1c3RtZW50ID0gZGF0YT8uYW1vdW50IHx8IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICA8QnVkZ2V0U2V0dGluZ0NhcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5PXtjYXRlZ29yeT8ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVtb2ppPXtjYXRlZ29yeT8uY2F0ZWdvcnkuZW1vaml9XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ9e2RhdGE/LmFtb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFZhbHVlPXtOdW1iZXIuTUFYX1NBRkVfSU5URUdFUn1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVuYWxsb2NhdGVkQW1vdW50PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHdhbnRzQnVkZ2V0QW1vdW50ID09PSBcIm51bWJlclwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdhbnRzQnVkZ2V0QW1vdW50ID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gTWF0aC5tYXgod2FudHNCdWRnZXRBbW91bnQgLSBhbGxvY2F0ZWRXYW50cywgMCkgLy8gRW5zdXJlIHBlcmNlbnRhZ2Ugc3RheXMgYmV0d2VlbiAwIGFuZCAxMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFZhbHVlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVXYW50c01hcChpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBbGxvY2F0ZWRXYW50cyhhbGxvY2F0ZWRXYW50cyArIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlPXsobmV3VmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBkYXRhPy5hbW91bnQgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVEaWZmZXJlbmNlID0gbmV3VmFsdWUgLSBvbGRWYWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBbGxvY2F0ZWRXbmF0cyA9IE1hdGgubWF4KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGVkV2FudHMgKyB2YWx1ZURpZmZlcmVuY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3QWxsb2NhdGVkV25hdHMgPD0gZXNzZW50aWFsQnVkZ2V0QW1vdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWxsb2NhdGVkV2FudHMobmV3QWxsb2NhdGVkV25hdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVdhbnRzTWFwKGksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDdXN0b21Ub2FzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkJ1ZGdldCBsaW1pdCBleGNlZWRlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50PXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0Ftb3VudCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRhdGE/LmFtb3VudCB8fCAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllc1N0b3JlLmluY3JlbWVudGFsQW1vdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEFsbG9jYXRlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGVkV2FudHMgKyBjYXRlZ29yaWVzU3RvcmUuaW5jcmVtZW50YWxBbW91bnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsQWxsb2NhdGVkIDw9IHdhbnRzQnVkZ2V0QW1vdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWxsb2NhdGVkV2FudHModG90YWxBbGxvY2F0ZWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlV2FudHNNYXAoaSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3QW1vdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDdXN0b21Ub2FzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkJ1ZGdldCBsaW1pdCBleGNlZWRlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVjcmVtZW50PXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVdhbnRzTWFwKGksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogTWF0aC5tYXgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGp1c3RtZW50IC0gY2F0ZWdvcmllc1N0b3JlLmluY3JlbWVudGFsQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBbGxvY2F0ZWRXYW50cyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvY2F0ZWRXYW50cyAtIGNhdGVnb3JpZXNTdG9yZS5pbmNyZW1lbnRhbEFtb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgOiBudWxsfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LWNhcmQgcHgtNCBwdC01IHBiLTMgbXQtNC41IHJvdW5kZWQtbGcgbWItNlwiPlxuICAgICAgICAgIDxCdWRnZXREaXNwbGF5XG4gICAgICAgICAgICB0aXRsZT1cIlNhdmluZ3NcIlxuICAgICAgICAgICAgYnVkZ2V0QW1vdW50PXtzYXZpbmdzQnVkZ2V0QW1vdW50ID8/IDB9XG4gICAgICAgICAgICBwZXJjZW50YWdlT2ZCdWRnZXRDYXB0aW9uPXtgJHtcbiAgICAgICAgICAgICAgc2F2aW5nc0dvYWxzWzBdPy5zaGFyZSA/PyBcIlwiXG4gICAgICAgICAgICB9JSBvZiBvdmVyYWxsIGJ1ZGdldGB9XG4gICAgICAgICAgICB1bmFsbG9jYXRlZENhcHRpb249XCJVbmFsbG9jYXRlZFwiXG4gICAgICAgICAgICBhbGxvY2F0ZWRDYXB0aW9uPVwiQWxsb2NhdGVkXCJcbiAgICAgICAgICAgIHVuYWxsb2NhdGVkQW1vdW50PXtcbiAgICAgICAgICAgICAgdHlwZW9mIHNhdmluZ3NCdWRnZXRBbW91bnQgPT09IFwibnVtYmVyXCIgJiYgc2F2aW5nc0J1ZGdldEFtb3VudCA+IDBcbiAgICAgICAgICAgICAgICA/IE1hdGgubWF4KHNhdmluZ3NCdWRnZXRBbW91bnQgLSBhbGxvY2F0ZWRTYXZpbmdzLCAwKVxuICAgICAgICAgICAgICAgIDogMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWxsb2NhdGVkQW1vdW50PXthbGxvY2F0ZWRTYXZpbmdzfVxuICAgICAgICAgICAgcHJvZ3Jlc3NQZXJjZW50YWdlPXtcbiAgICAgICAgICAgICAgdHlwZW9mIHNhdmluZ3NCdWRnZXRBbW91bnQgPT09IFwibnVtYmVyXCIgJiYgc2F2aW5nc0J1ZGdldEFtb3VudCA+IDBcbiAgICAgICAgICAgICAgICA/IE1hdGgubWluKChhbGxvY2F0ZWRTYXZpbmdzIC8gc2F2aW5nc0J1ZGdldEFtb3VudCkgKiAxMDAsIDEwMCkgLy8gRW5zdXJlIHBlcmNlbnRhZ2Ugc3RheXMgYmV0d2VlbiAwIGFuZCAxMDBcbiAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb2dyZXNzQ29sb3I9XCIjODRDMUIyXCJcbiAgICAgICAgICAgIGluZGljYXRvckNvbG9yPVwiYmctWyM4NEMxQjJdXCJcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyIG10LTYgbWItNC41XCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICB7Y2F0ZWdvcmllc1N0b3JlLmNhdGVnb3J5QnVkZ2V0c1syXSAmJlxuICAgICAgICAgICAgY2F0ZWdvcmllc1N0b3JlLmNhdGVnb3J5QnVkZ2V0c1syXS5kYXRhPy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtcm93IGl0ZW1zLWNlbnRlciBtYi00XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdHJhY2tpbmctd2lkZSBmb250LW1lZGl1bSB0ZXh0LXNraW4tc3VidGl0bGUgZm9udC1wcmltYXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgIEdvYWxzXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8U2F2aW5nc1NldHRpbmdDYXJkXG4gICAgICAgICAgICAgICAgICBpc0FkZGVkPXthZGRTYXZpbmdzfVxuICAgICAgICAgICAgICAgICAgZ29hbD1cIkNyZWF0ZSBhIFJhaW55IGRheSBmdW5kIGdvYWxcIlxuICAgICAgICAgICAgICAgICAgZW1vamk9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUwODY5ODMwODY0OS02ODkyNDllYzU0NTU/Y3JvcD1lbnRyb3B5JmNzPXRpbnlzcmdiJmZpdD1tYXgmZm09anBnJml4aWQ9TW53eGZEQjhNWHh5WVc1a2IyMThNSHg4Zkh4OGZIeDhNVFk0TURjeE5UZzBPUSZpeGxpYj1yYi00LjAuMyZxPTgwJnV0bV9jYW1wYWlnbj1hcGktY3JlZGl0JnV0bV9tZWRpdW09cmVmZXJyYWwmdXRtX3NvdXJjZT11bnNwbGFzaF9zb3VyY2Umdz0xMDgwXCJcbiAgICAgICAgICAgICAgICAgIGFtb3VudD17c2F2aW5nc0J1ZGdldEFtb3VudCA/PyAwfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRBZGRTYXZpbmdzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBzZXRBbGxvY2F0ZWRTYXZpbmdzKHNhdmluZ3NCdWRnZXRBbW91bnQpO1xuICAgICAgICAgICAgICAgICAgICBzYXZpbmdzQm90dG9tU2hlZXRTdG9yZS5zZXRTYXZpbmdzQm90dG9tU2hlZXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNldFNhdmluZ3NMaXN0KFtcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHNhdmluZ3NCdWRnZXRBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cmlidXRpb25fYW1vdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5X2lkOiAxMyA/PyBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJFbWVyZ2VuY3kgZnVuZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHNldWRvX25hbWU6IFwiRW1lcmdlbmN5IGZ1bmRcIiArIFwiIFwiICsgXCLwn46vXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlcm5faWQ6IDEzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cmlidXRpb25fYXQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19jb250cmlidXRlX2N1c3RvbWl6ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgZWRpdD17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBzZXRBZGRTYXZpbmdzKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0QWxsb2NhdGVkU2F2aW5ncygwKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICBjYXRlZ29yaWVzU3RvcmUuY2F0ZWdvcnlCdWRnZXRzWzJdLmRhdGEubWFwKChjYXRlZ29yeTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXJvdyBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdHJhY2tpbmctd2lkZSBmb250LW1lZGl1bSB0ZXh0LXNraW4tc3VidGl0bGUgZm9udC1wcmltYXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBHb2Fsc1xuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0cmFja2luZy13aWRlIGZvbnQtbWVkaXVtIHRleHQtc2tpbi1zdWJ0aXRsZSBmb250LXByaW1hcnlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZGdldCBjb250cmlidXRpb25cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxFZGl0U2F2aW5nc1ZpZXdDYXJkXG4gICAgICAgICAgICAgICAgICAgICAgYW1vdW50PXtzYXZpbmdzQnVkZ2V0QW1vdW50ID8/IDB9XG4gICAgICAgICAgICAgICAgICAgICAgaWNvbj1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTA4Njk4MzA4NjQ5LTY4OTI0OWVjNTQ1NT9jcm9wPWVudHJvcHkmY3M9dGlueXNyZ2ImZml0PW1heCZmbT1qcGcmaXhpZD1Nbnd4ZkRCOE1YeHlZVzVrYjIxOE1IeDhmSHg4Zkh4OE1UWTRNRGN4TlRnME9RJml4bGliPXJiLTQuMC4zJnE9ODAmdXRtX2NhbXBhaWduPWFwaS1jcmVkaXQmdXRtX21lZGl1bT1yZWZlcnJhbCZ1dG1fc291cmNlPXVuc3BsYXNoX3NvdXJjZSZ3PTEwODBcIlxuICAgICAgICAgICAgICAgICAgICAgIGdvYWw9XCJSYWlueSBkYXkgZnVuZFwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICA8Qm90dG9tU2hlZXRcbiAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHtcbiAgICAgICAgICAgIHNhdmluZ3NCb3R0b21TaGVldFN0b3JlLnNldFNhdmluZ3NCb3R0b21TaGVldChmYWxzZSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBvcGVuPXtzYXZpbmdzQm90dG9tU2hlZXRTdG9yZS5zYXZpbmdzQm90dG9tU2hlZXR9XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIGJvcmRlclJhZGl1czogMjQsXG4gICAgICAgICAgfX1cbiAgICAgICAgICBjaGlsZHJlbj17XG4gICAgICAgICAgICBzYXZpbmdzU3VjY2VzcyA/IChcbiAgICAgICAgICAgICAgPFN1Y2Nlc3NmdWxsQ3JlYXRlZFZpZXdcbiAgICAgICAgICAgICAgICBpbWFnZT17c3VjY2Vzc0ljb259XG4gICAgICAgICAgICAgICAgdGl0bGU9XCJXaG9vcCEgR29hbCBjcmVhdGVkXCJcbiAgICAgICAgICAgICAgICBjYXB0aW9uPVwiRHVpcyBhdXRlIGNhdGVnb3JpemUgaW4gcmVwcmVoZW5kZXJpdCBpbiB2b2x1cHRhdGUgdmVsaXQgZXNzZSBjaWxsdW0gZG9sb3JlIGV1IGZ1Z2lhdCBudWxsYSBwYXJpYXR1ciBFeGNlcHRldXIgc2ludCBvY2NhZWNhdCBjdXBpZGF0YXQgbm9uIHByb2lkZW50LlwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0U2F2aW5nc1N1Y2Nlc3MoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgc2F2aW5nc0JvdHRvbVNoZWV0U3RvcmUuc2V0U2F2aW5nc0JvdHRvbVNoZWV0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPFNhdmluZ3NHb2FsQ29uZmlybWF0aW9uXG4gICAgICAgICAgICAgICAgbW9udGhseUNvbnRyaWJ1dGlvbj17c2F2aW5nc0J1ZGdldEFtb3VudH1cbiAgICAgICAgICAgICAgICB0YXJnZXRBbW91bnQ9e2Vzc2VudGlhbEJ1ZGdldEFtb3VudCAqIDN9XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NQZXJjZW50YWdlPXtcbiAgICAgICAgICAgICAgICAgIHR5cGVvZiBzYXZpbmdzQnVkZ2V0QW1vdW50ID09PSBcIm51bWJlclwiICYmXG4gICAgICAgICAgICAgICAgICBzYXZpbmdzQnVkZ2V0QW1vdW50ID4gMFxuICAgICAgICAgICAgICAgICAgICA/IE1hdGgubWluKFxuICAgICAgICAgICAgICAgICAgICAgICAgKGFsbG9jYXRlZFNhdmluZ3MgLyBzYXZpbmdzQnVkZ2V0QW1vdW50KSAqIDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIDEwMFxuICAgICAgICAgICAgICAgICAgICAgICkgLy8gRW5zdXJlIHBlcmNlbnRhZ2Ugc3RheXMgYmV0d2VlbiAwIGFuZCAxMDBcbiAgICAgICAgICAgICAgICAgICAgOiAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVtb2ppPVwi8J+Or1wiXG4gICAgICAgICAgICAgICAgZ29hbD17c2VsZWN0ZWRTYXZpbmdzR29hbC5uYW1lfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNhdmVCdWRnZXRJbmZvKCkudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0cy5pc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRTYXZpbmdzU3VjY2Vzcyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdFNuYXA9ezQwMH1cbiAgICAgICAgPjwvQm90dG9tU2hlZXQ+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5leHBvcnQgZGVmYXVsdCBFZGl0QnVkZ2V0U2V0dGluZ3M7XG4iLCJpbXBvcnQgeyBjcmVhdGUgfSBmcm9tIFwienVzdGFuZFwiO1xuXG5pbnRlcmZhY2UgSW5jb21lU3BsaXQge1xuICBlc3NlbnRpYWxzOiBudW1iZXI7XG4gIHdhbnRzOiBudW1iZXI7XG4gIHNhdmluZ3M6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIEJ1ZGdldFNldHRpbmdzIHtcbiAgY3VycmVuY3k6IHN0cmluZztcbiAgbW9udGhseUluY29tZTogbnVtYmVyO1xuICBpbmNvbWVTcGxpdDogSW5jb21lU3BsaXQ7XG59XG5cbnR5cGUgSUJ1ZGdldFNldHRpbmdzU3RvcmUgPSBCdWRnZXRTZXR0aW5ncyAmIHtcbiAgc2V0TW9udGhseUluY29tZTogKGFtb3VudDogbnVtYmVyKSA9PiB2b2lkO1xuICBzZXRJbmNvbWVTcGxpdDogKHNwbGl0OiBJbmNvbWVTcGxpdCkgPT4gdm9pZDtcbn07XG5cbmNvbnN0IHVzZUJ1ZGdldFNldHRpbmdzU3RvcmUgPSBjcmVhdGU8SUJ1ZGdldFNldHRpbmdzU3RvcmU+KChzZXQpID0+ICh7XG4gIGN1cnJlbmN5OiBcIiBLRVNcIixcbiAgbW9udGhseUluY29tZTogMCxcbiAgaW5jb21lU3BsaXQ6IHtcbiAgICBlc3NlbnRpYWxzOiA1MCxcbiAgICB3YW50czogMzAsXG4gICAgc2F2aW5nczogMjAsXG4gIH0sXG4gIHNldE1vbnRobHlJbmNvbWU6IChhbW91bnQ6IG51bWJlcikgPT4ge1xuICAgIHJldHVybiBzZXQoKHN0YXRlOiBCdWRnZXRTZXR0aW5ncykgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0OiBCdWRnZXRTZXR0aW5ncyA9IHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIG1vbnRobHlJbmNvbWU6IGFtb3VudCxcbiAgICAgIH07XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuICB9LFxuICBnZXRNb250aGx5SW5jb21lOiAoKSA9PiB7XG4gICAgcmV0dXJuIHNldCgoc3RhdGU6IEJ1ZGdldFNldHRpbmdzKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQ6IEJ1ZGdldFNldHRpbmdzID0ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgbW9udGhseUluY29tZTogc3RhdGUubW9udGhseUluY29tZSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuICB9LFxuICBzZXRJbmNvbWVTcGxpdDogKHNwbGl0OiBJbmNvbWVTcGxpdCkgPT4ge1xuICAgIHJldHVybiBzZXQoKHN0YXRlOiBCdWRnZXRTZXR0aW5ncykgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0OiBCdWRnZXRTZXR0aW5ncyA9IHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGluY29tZVNwbGl0OiBzcGxpdCxcbiAgICAgIH07XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuICB9LFxuICBnZXRJbmNvbWVTcGxpdDogKCkgPT4ge1xuICAgIHJldHVybiBzZXQoKHN0YXRlOiBCdWRnZXRTZXR0aW5ncykgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0OiBCdWRnZXRTZXR0aW5ncyA9IHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGluY29tZVNwbGl0OiBzdGF0ZS5pbmNvbWVTcGxpdCxcbiAgICAgIH07XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuICB9LFxufSkpO1xuXG5leHBvcnQge1xuICBJbmNvbWVTcGxpdCxcbiAgQnVkZ2V0U2V0dGluZ3MsXG4gIElCdWRnZXRTZXR0aW5nc1N0b3JlLFxuICB1c2VCdWRnZXRTZXR0aW5nc1N0b3JlLFxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==